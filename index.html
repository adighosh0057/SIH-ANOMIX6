<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>ANOMIX - AI Health Chatbot</title>
  <link href="https://fonts.googleapis.com" rel="preconnect"/>
  <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            "primary": "#13a4ec",
            "background-light": "#f6f7f8",
            "background-dark": "#101c22",
          },
          fontFamily: {
            "display": ["Inter"]
          },
        },
      },
    }
  </script>
  <style>
    .material-symbols-outlined {
      font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 24;
    }
  </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display">
  <div class="flex flex-col h-screen justify-between">

    <!-- Title bar -->
    <header class="bg-primary dark:bg-primary p-4 shadow-md flex justify-center">
      <h1 class="text-white font-extrabold text-xl tracking-wide">ANOMIX</h1>
    </header>

    <!-- Chat area -->
    <div id="chat-container" class="flex-grow overflow-y-auto p-4 space-y-4">
      <div class="flex items-end gap-3">
        <div class="flex-shrink-0">
          <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center">
            <span class="material-symbols-outlined text-primary">local_hospital</span>
          </div>
        </div>
        <div class="flex-1">
          <div class="bg-white dark:bg-background-dark rounded-lg rounded-bl-none p-3 shadow-sm">
            <p class="text-black dark:text-white text-base">
              Hello! ðŸ‘‹ Iâ€™m ANOMIX, your Health Assistant. Describe your symptoms, and I'll try to diagnose and suggest first aid.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Input -->
    <footer class="p-4 border-t border-white/10 dark:border-black/10 bg-background-light dark:bg-background-dark">
      <div class="flex items-center gap-3">
        <input id="user-input"
          class="flex-grow bg-white/50 dark:bg-black/20 border-none rounded-full h-12 px-5 text-black dark:text-white placeholder-black/50 dark:placeholder-white/50 focus:ring-2 focus:ring-primary"
          placeholder="Type your message..." type="text"/>
        <button id="send-btn" class="w-12 h-12 flex-shrink-0 rounded-full bg-primary flex items-center justify-center text-white">
          <span class="material-symbols-outlined">send</span>
        </button>
      </div>
      <p class="text-xs text-center text-black/50 dark:text-white/50 mt-3">For informational purposes only, not a medical diagnosis.</p>
    </footer>
  </div>

  <script>
    // Language selection
    let userLang = null;
    const HINDI_KB = {
      "common cold": {
        overview: "à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤¸à¤°à¥à¤¦à¥€ à¤à¤• à¤¹à¤²à¥à¤•à¤¾ à¤µà¤¾à¤¯à¤°à¤² à¤¸à¤‚à¤•à¥à¤°à¤®à¤£ à¤¹à¥ˆà¥¤",
        symptoms: ["à¤¬à¤¹à¤¤à¥€ à¤¨à¤¾à¤•", "à¤—à¤²à¥‡ à¤®à¥‡à¤‚ à¤–à¤°à¤¾à¤¶", "à¤›à¥€à¤‚à¤•", "à¤–à¤¾à¤‚à¤¸à¥€", "à¤¹à¤²à¥à¤•à¤¾ à¤¸à¤¿à¤°à¤¦à¤°à¥à¤¦", "à¤¹à¤²à¥à¤•à¤¾ à¤¬à¥à¤–à¤¾à¤°"],
        prevention: ["à¤¹à¤¾à¤¥ à¤§à¥‹à¤à¤‚", "à¤šà¥‡à¤¹à¤°à¥‡ à¤•à¥‹ à¤¨ à¤›à¥à¤à¤‚", "à¤¬à¥€à¤®à¤¾à¤° à¤²à¥‹à¤—à¥‹à¤‚ à¤¸à¥‡ à¤¦à¥‚à¤° à¤°à¤¹à¥‡à¤‚"],
        treatment: ["à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚", "à¤¤à¤°à¤² à¤ªà¤¦à¤¾à¤°à¥à¤¥ à¤²à¥‡à¤‚", "à¤¦à¤°à¥à¤¦ à¤¨à¤¿à¤µà¤¾à¤°à¤•", "à¤¨à¤®à¤• à¤µà¤¾à¤²à¤¾ à¤¸à¥à¤ªà¥à¤°à¥‡"],
        seekCare: ["3+ à¤¦à¤¿à¤¨ à¤¤à¤• à¤¤à¥‡à¤œ à¤¬à¥à¤–à¤¾à¤°", "à¤¸à¤¾à¤‚à¤¸ à¤²à¥‡à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¤ à¤¿à¤¨à¤¾à¤ˆ", "à¤¸à¥€à¤¨à¥‡ à¤®à¥‡à¤‚ à¤¦à¤°à¥à¤¦"]
      },
      "influenza": {
        overview: "à¤«à¥à¤²à¥‚ à¤à¤• à¤¸à¤‚à¤•à¥à¤°à¤¾à¤®à¤• à¤¶à¥à¤µà¤¸à¤¨ à¤°à¥‹à¤— à¤¹à¥ˆà¥¤",
        symptoms: ["à¤¤à¥‡à¤œ à¤¬à¥à¤–à¤¾à¤°", "à¤®à¤¾à¤‚à¤¸à¤ªà¥‡à¤¶à¤¿à¤¯à¥‹à¤‚ à¤®à¥‡à¤‚ à¤¦à¤°à¥à¤¦", "à¤¥à¤•à¤¾à¤¨", "à¤¸à¥‚à¤–à¥€ à¤–à¤¾à¤‚à¤¸à¥€", "à¤ à¤‚à¤¡ à¤²à¤—à¤¨à¤¾", "à¤¸à¤¿à¤°à¤¦à¤°à¥à¤¦"],
        prevention: ["à¤µà¤¾à¤°à¥à¤·à¤¿à¤• à¤Ÿà¥€à¤•à¤¾à¤•à¤°à¤£", "à¤¹à¤¾à¤¥à¥‹à¤‚ à¤•à¥€ à¤¸à¤«à¤¾à¤ˆ", "à¤­à¥€à¤¡à¤¼ à¤¸à¥‡ à¤¬à¤šà¥‡à¤‚"],
        treatment: ["à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚", "à¤¤à¤°à¤² à¤ªà¤¦à¤¾à¤°à¥à¤¥ à¤²à¥‡à¤‚", "à¤à¤‚à¤Ÿà¥€à¤µà¤¾à¤¯à¤°à¤² à¤¦à¤µà¤¾à¤à¤‚ (à¤¡à¥‰à¤•à¥à¤Ÿà¤° à¤¸à¥‡)"],
        seekCare: ["à¤¸à¤¾à¤‚à¤¸ à¤²à¥‡à¤¨à¥‡ à¤®à¥‡à¤‚ à¤ªà¤°à¥‡à¤¶à¤¾à¤¨à¥€", "à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤¤à¥‡à¤œ à¤¬à¥à¤–à¤¾à¤°", "à¤­à¥à¤°à¤®"]
      },
      "covid-19": {
        overview: "à¤•à¥‹à¤µà¤¿à¤¡-19 à¤à¤• à¤¶à¥à¤µà¤¸à¤¨ à¤°à¥‹à¤— à¤¹à¥ˆ à¤œà¥‹ à¤•à¥‹à¤°à¥‹à¤¨à¤¾à¤µà¤¾à¤¯à¤°à¤¸ SARS-CoV-2 à¤•à¥‡ à¤•à¤¾à¤°à¤£ à¤¹à¥‹à¤¤à¤¾ à¤¹à¥ˆà¥¤",
        symptoms: ["à¤¬à¥à¤–à¤¾à¤°", "à¤–à¤¾à¤‚à¤¸à¥€", "à¤¥à¤•à¤¾à¤¨", "à¤¸à¥à¤µà¤¾à¤¦/à¤—à¤‚à¤§ à¤•à¤¾ à¤œà¤¾à¤¨à¤¾", "à¤¸à¤¾à¤‚à¤¸ à¤•à¥€ à¤¤à¤•à¤²à¥€à¤«", "à¤—à¤²à¥‡ à¤®à¥‡à¤‚ à¤–à¤°à¤¾à¤¶"],
        prevention: ["à¤Ÿà¥€à¤•à¤¾à¤•à¤°à¤£", "à¤®à¤¾à¤¸à¥à¤•", "à¤¹à¤¾à¤¥à¥‹à¤‚ à¤•à¥€ à¤¸à¤«à¤¾à¤ˆ", "à¤¸à¤¾à¤®à¤¾à¤œà¤¿à¤• à¤¦à¥‚à¤°à¥€"],
        treatment: ["à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚", "à¤¤à¤°à¤² à¤ªà¤¦à¤¾à¤°à¥à¤¥ à¤²à¥‡à¤‚", "à¤¸à¥à¤¥à¤¾à¤¨à¥€à¤¯ à¤¸à¥à¤µà¤¾à¤¸à¥à¤¥à¥à¤¯ à¤¸à¤²à¤¾à¤¹ à¤•à¤¾ à¤ªà¤¾à¤²à¤¨ à¤•à¤°à¥‡à¤‚"],
        seekCare: ["à¤¸à¤¾à¤‚à¤¸ à¤²à¥‡à¤¨à¥‡ à¤®à¥‡à¤‚ à¤•à¤ à¤¿à¤¨à¤¾à¤ˆ", "à¤¨à¥€à¤²à¥‡ à¤¹à¥‹à¤‚à¤ ", "à¤­à¥à¤°à¤®", "à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤¸à¥€à¤¨à¥‡ à¤®à¥‡à¤‚ à¤¦à¤°à¥à¤¦"]
      },
      "migraine": {
        overview: "à¤®à¤¾à¤‡à¤—à¥à¤°à¥‡à¤¨ à¤à¤• à¤¨à¥à¤¯à¥‚à¤°à¥‹à¤²à¥‰à¤œà¤¿à¤•à¤² à¤¸à¥à¤¥à¤¿à¤¤à¤¿ à¤¹à¥ˆ à¤œà¤¿à¤¸à¤®à¥‡à¤‚ à¤¤à¥‡à¤œ à¤¸à¤¿à¤°à¤¦à¤°à¥à¤¦, à¤®à¤¤à¤²à¥€ à¤¯à¤¾ à¤ªà¥à¤°à¤•à¤¾à¤¶ à¤¸à¤‚à¤µà¥‡à¤¦à¤¨à¤¶à¥€à¤²à¤¤à¤¾ à¤¹à¥‹à¤¤à¥€ à¤¹à¥ˆà¥¤",
        symptoms: ["à¤§à¤¡à¤¼à¤•à¤¤à¤¾ à¤¸à¤¿à¤°à¤¦à¤°à¥à¤¦", "à¤®à¤¤à¤²à¥€", "à¤‰à¤²à¥à¤Ÿà¥€", "à¤ªà¥à¤°à¤•à¤¾à¤¶/à¤†à¤µà¤¾à¤œ à¤¸à¤‚à¤µà¥‡à¤¦à¤¨à¤¶à¥€à¤²à¤¤à¤¾"],
        prevention: ["à¤Ÿà¥à¤°à¤¿à¤—à¤° à¤ªà¤¹à¤šà¤¾à¤¨à¥‡à¤‚ à¤”à¤° à¤¬à¤šà¥‡à¤‚", "à¤¤à¤¨à¤¾à¤µ à¤ªà¥à¤°à¤¬à¤‚à¤§à¤¨", "à¤¨à¤¿à¤¯à¤®à¤¿à¤¤ à¤¨à¥€à¤‚à¤¦"],
        treatment: ["à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚", "à¤ªà¤¾à¤¨à¥€ à¤ªà¤¿à¤à¤‚", "à¤¦à¤°à¥à¤¦ à¤¨à¤¿à¤µà¤¾à¤°à¤• à¤¯à¤¾ à¤Ÿà¥à¤°à¤¿à¤ªà¥à¤Ÿà¤¾à¤¨ (à¤•à¥‡à¤µà¤² à¤µà¤¯à¤¸à¥à¤•à¥‹à¤‚ à¤•à¥‡ à¤²à¤¿à¤)"],
        seekCare: ["à¤…à¤¬ à¤¤à¤• à¤•à¤¾ à¤¸à¤¬à¤¸à¥‡ à¤–à¤°à¤¾à¤¬ à¤¸à¤¿à¤°à¤¦à¤°à¥à¤¦", "à¤¨à¥à¤¯à¥‚à¤°à¥‹à¤²à¥‰à¤œà¤¿à¤•à¤² à¤²à¤•à¥à¤·à¤£", "à¤¬à¥à¤–à¤¾à¤° à¤•à¥‡ à¤¸à¤¾à¤¥ à¤—à¤°à¥à¤¦à¤¨ à¤…à¤•à¤¡à¤¼à¤¨à¤¾"]
      },
      "dengue": {
        overview: "à¤¡à¥‡à¤‚à¤—à¥‚ à¤à¤• à¤®à¤šà¥à¤›à¤° à¤œà¤¨à¤¿à¤¤ à¤µà¤¾à¤¯à¤°à¤² à¤¬à¥€à¤®à¤¾à¤°à¥€ à¤¹à¥ˆ à¤œà¥‹ à¤‰à¤·à¥à¤£à¤•à¤Ÿà¤¿à¤¬à¤‚à¤§à¥€à¤¯ à¤•à¥à¤·à¥‡à¤¤à¥à¤°à¥‹à¤‚ à¤®à¥‡à¤‚ à¤†à¤® à¤¹à¥ˆà¥¤",
        symptoms: ["à¤¤à¥‡à¤œ à¤¬à¥à¤–à¤¾à¤°", "à¤¤à¥‡à¤œ à¤¸à¤¿à¤°à¤¦à¤°à¥à¤¦", "à¤†à¤‚à¤–à¥‹à¤‚ à¤•à¥‡ à¤ªà¥€à¤›à¥‡ à¤¦à¤°à¥à¤¦", "à¤œà¥‹à¤¡à¤¼/à¤®à¤¾à¤‚à¤¸à¤ªà¥‡à¤¶à¤¿à¤¯à¥‹à¤‚ à¤®à¥‡à¤‚ à¤¦à¤°à¥à¤¦", "à¤šà¤•à¤¤à¥à¤¤à¥‡", "à¤®à¤¤à¤²à¥€"],
        prevention: ["à¤®à¤šà¥à¤›à¤° à¤•à¥‡ à¤•à¤¾à¤Ÿà¤¨à¥‡ à¤¸à¥‡ à¤¬à¤šà¥‡à¤‚", "à¤–à¤¡à¤¼à¥‡ à¤ªà¤¾à¤¨à¥€ à¤•à¥‹ à¤¹à¤Ÿà¤¾à¤à¤‚", "à¤®à¤šà¥à¤›à¤°à¤¦à¤¾à¤¨à¥€ à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¥‡à¤‚"],
        treatment: ["à¤¤à¤°à¤² à¤ªà¤¦à¤¾à¤°à¥à¤¥ à¤²à¥‡à¤‚", "à¤¬à¥à¤–à¤¾à¤°/à¤¦à¤°à¥à¤¦ à¤•à¥‡ à¤²à¤¿à¤ à¤ªà¥‡à¤°à¤¾à¤¸à¤¿à¤Ÿà¤¾à¤®à¥‹à¤²", "NSAIDs à¤¸à¥‡ à¤¬à¤šà¥‡à¤‚"],
        seekCare: ["à¤¤à¥‡à¤œ à¤ªà¥‡à¤Ÿ à¤¦à¤°à¥à¤¦", "à¤–à¥‚à¤¨ à¤†à¤¨à¤¾", "à¤²à¤—à¤¾à¤¤à¤¾à¤° à¤‰à¤²à¥à¤Ÿà¥€", "à¤…à¤¤à¥à¤¯à¤§à¤¿à¤• à¤¨à¥€à¤‚à¤¦ à¤†à¤¨à¤¾"]
      }
    };
    // Show language selection prompt at start
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        addMessage('Please select your language / à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤ªà¤¨à¥€ à¤­à¤¾à¤·à¤¾ à¤šà¥à¤¨à¥‡à¤‚:', 'bot');
        addMessage('Type "English" or "Hindi" to continue.', 'bot');
      }, 300);
    });
    const DISEASE_KB = {
      "common cold": {
        "overview": "The common cold is a mild viral infection of the upper respiratory tract.",
        "symptoms": ["runny nose", "sore throat", "sneezing", "cough", "mild headache", "low fever"],
        "prevention": ["wash hands", "avoid face touching", "stay clear of sick people"],
        "treatment": ["rest", "fluids", "pain relievers", "saline nasal spray"],
        "seekCare": ["high fever lasting 3+ days", "breathing difficulty", "chest pain"]
      },
      "influenza": {
        "overview": "Flu is a contagious respiratory illness caused by influenza viruses.",
        "symptoms": ["high fever", "muscle aches", "fatigue", "dry cough", "chills", "headache"],
        "prevention": ["annual vaccination", "hand hygiene", "avoid crowds when ill"],
        "treatment": ["rest", "fluids", "antiviral drugs (doctor prescribed)"],
        "seekCare": ["trouble breathing", "persistent high fever", "confusion"]
      },
      "covid-19": {
        "overview": "COVID-19 is a respiratory illness caused by coronavirus SARS-CoV-2.",
        "symptoms": ["fever", "cough", "fatigue", "loss of taste/smell", "shortness of breath", "sore throat"],
        "prevention": ["vaccination", "mask use", "hand hygiene", "social distancing"],
        "treatment": ["rest", "fluids", "follow local health guidance"],
        "seekCare": ["difficulty breathing", "bluish lips", "confusion", "persistent chest pain"]
      },
      "migraine": {
        "overview": "Migraine is a neurological condition causing severe headaches often with nausea or light sensitivity.",
        "symptoms": ["throbbing headache", "nausea", "vomiting", "light/sound sensitivity"],
        "prevention": ["identify and avoid triggers", "stress management", "regular sleep"],
        "treatment": ["rest", "hydration", "pain relievers or triptans adults only"],
        "seekCare": ["worst headache ever", "neurological symptoms", "stiff neck with fever"]
      },
      "dengue": {
        "overview": "Dengue is a mosquito-borne viral disease common in tropical regions.",
        "symptoms": ["high fever", "severe headache", "pain behind eyes", "joint/muscle pain", "rash", "nausea"],
        "prevention": ["avoid mosquito bites", "remove standing water", "use mosquito nets"],
        "treatment": ["fluids", "acetaminophen for fever/pain", "avoid NSAIDs"],
        "seekCare": ["severe abdominal pain", "bleeding", "persistent vomiting", "drowsiness"]
      }
      // Add more diseases and details here
    };

    const greetings = ["hi", "hello", "hey", "hola", "yo", "good morning", "good evening"];
    let lastBotResponse = null;

    function guessDisease(message) {
      const msg = message.toLowerCase();
      for (const [disease, info] of Object.entries(DISEASE_KB)) {
        let matchCount = 0;
        for (const symptom of info.symptoms) {
          if (msg.includes(symptom)) {
            matchCount += 1;
          }
        }
        if (matchCount >= 2) {
          return disease;
        }
      }
      return null;
    }

    function getResponse(message) {
      const lowerMsg = message.toLowerCase();

      // Language selection logic
      if (!userLang) {
        if (lowerMsg.includes('hindi')) {
          userLang = 'hindi';
          return 'à¤†à¤ªà¤¨à¥‡ à¤¹à¤¿à¤‚à¤¦à¥€ à¤šà¥à¤¨à¥€ à¤¹à¥ˆà¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤ªà¤¨à¥‡ à¤²à¤•à¥à¤·à¤£ à¤²à¤¿à¤–à¥‡à¤‚à¥¤';
        } else if (lowerMsg.includes('english')) {
          userLang = 'english';
          return 'You have selected English. Please describe your symptoms.';
        } else {
          return 'Please type "English" or "Hindi" to select your language.';
        }
      }

      // Greeting response
      if (greetings.some(greet => lowerMsg.startsWith(greet))) {
        if (userLang === 'hindi') {
          const greetingResponses = [
            "à¤¨à¤®à¤¸à¥à¤¤à¥‡, à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥€ à¤•à¥ˆà¤¸à¥‡ à¤®à¤¦à¤¦ à¤•à¤° à¤¸à¤•à¤¤à¤¾ à¤¹à¥‚à¤?",
            "à¤¹à¥ˆà¤²à¥‹! à¤•à¥ƒà¤ªà¤¯à¤¾ à¤…à¤ªà¤¨à¥‡ à¤²à¤•à¥à¤·à¤£ à¤¬à¤¤à¤¾à¤à¤‚à¥¤",
            "à¤¸à¥à¤µà¤¾à¤—à¤¤ à¤¹à¥ˆ! à¤¬à¤¤à¤¾à¤à¤‚ à¤†à¤ªà¤•à¥‹ à¤•à¥ˆà¤¸à¤¾ à¤®à¤¹à¤¸à¥‚à¤¸ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆà¥¤"
          ];
          return greetingResponses[Math.floor(Math.random() * greetingResponses.length)];
        } else {
          const greetingResponses = [
            "Hey, how can I help you today?",
            "Hello! Please describe your symptoms.",
            "Hi there! Tell me how you feel."
          ];
          return greetingResponses[Math.floor(Math.random() * greetingResponses.length)];
        }
      }

      // Disease guess
      const diseaseGuess = guessDisease(lowerMsg);
      if (diseaseGuess) {
        if (userLang === 'hindi') {
          const info = HINDI_KB[diseaseGuess];
          return `à¤†à¤ªà¤•à¥‡ à¤²à¤•à¥à¤·à¤£à¥‹à¤‚ à¤•à¥‡ à¤†à¤§à¤¾à¤° à¤ªà¤°, à¤†à¤ªà¤•à¥‹ ${diseaseGuess} à¤¹à¥‹ à¤¸à¤•à¤¤à¤¾ à¤¹à¥ˆà¥¤ ${info.overview} à¤ªà¥à¤°à¤¾à¤¥à¤®à¤¿à¤• à¤‰à¤ªà¤šà¤¾à¤°: ${info.treatment.join(", ")}. à¤¡à¥‰à¤•à¥à¤Ÿà¤° à¤¸à¥‡ à¤®à¤¿à¤²à¥‡à¤‚ à¤¯à¤¦à¤¿: ${info.seekCare.join(", ")}.`;
        } else {
          const info = DISEASE_KB[diseaseGuess];
          return `Based on your symptoms, you might have ${diseaseGuess}. ${info.overview} For first aid, you can: ${info.treatment.join(", ")}. See a doctor if you experience: ${info.seekCare.join(", ")}.`;
        }
      }

      // Fallback
      if (userLang === 'hindi') {
        return "à¤§à¤¨à¥à¤¯à¤µà¤¾à¤¦à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤”à¤° à¤²à¤•à¥à¤·à¤£ à¤¯à¤¾ à¤µà¤¿à¤µà¤°à¤£ à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚ à¤œà¤¿à¤¸à¤¸à¥‡ à¤®à¥ˆà¤‚ à¤¬à¥‡à¤¹à¤¤à¤° à¤¸à¤¹à¤¾à¤¯à¤¤à¤¾ à¤•à¤° à¤¸à¤•à¥‚à¤‚à¥¤";
      } else {
        return "Thanks for sharing. Could you tell me more symptoms or details to help diagnose?";
      }
    }

    function addMessage(message, sender = "user") {
      const chatContainer = document.getElementById("chat-container");

      const wrapper = document.createElement("div");
      wrapper.className = `flex items-end gap-3 ${sender === "user" ? "justify-end" : ""}`;

      if (sender !== "user") {
        const avatarWrap = document.createElement("div");
        avatarWrap.className = "flex-shrink-0";
        const avatar = document.createElement("div");
        avatar.className = "w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center";
        const icon = document.createElement("span");
        icon.className = "material-symbols-outlined text-primary";
        icon.textContent = "local_hospital";
        avatar.appendChild(icon);
        avatarWrap.appendChild(avatar);
        wrapper.appendChild(avatarWrap);
      }

      const bubble = document.createElement("div");
      bubble.className = sender === "user"
        ? "bg-primary text-white rounded-lg rounded-br-none p-3 max-w-xs whitespace-pre-line"
        : "bg-white dark:bg-background-dark text-black dark:text-white rounded-lg rounded-bl-none p-3 max-w-xs shadow-sm whitespace-pre-line";
      bubble.textContent = message;

      if (sender === "user") {
        wrapper.appendChild(bubble);
        const spacer = document.createElement("div");
        spacer.className = "flex-shrink-0 w-10 h-10";
        wrapper.appendChild(spacer);
      } else {
        const contentWrap = document.createElement("div");
        contentWrap.className = "flex-1";
        contentWrap.appendChild(bubble);
        wrapper.appendChild(contentWrap);
      }

      chatContainer.appendChild(wrapper);
      chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    async function sendMessage() {
      const input = document.getElementById("user-input");
      const userMessage = input.value.trim();
      if (!userMessage) return;

      addMessage(userMessage, "user");
      input.value = "";

      // Prevent repetitive bot responses
      let botReply = getResponse(userMessage);
      if (botReply === lastBotResponse) {
        botReply = "Sorry if I'm repeating myself. Could you please provide more details?";
      }
      lastBotResponse = botReply;
      addMessage(botReply, "bot");
    }

    document.getElementById("send-btn").addEventListener("click", sendMessage);
    document.getElementById("user-input").addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
  </script>
</body>
</html>
